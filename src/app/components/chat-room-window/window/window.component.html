<mat-card class="message-window" *ngIf="room">
    <mat-card-header class="window-header">
        <mat-card-title class="window-title">
            <mat-toolbar class="room-name">
                <button mat-icon-button routerLink="/chatroom">
                    <mat-icon>arrow_back_ios</mat-icon>
                </button>
                {{ name }}
            </mat-toolbar>
        </mat-card-title>
        <mat-card-subtitle class="window-subtitle" *ngIf="roomUserNames">
            <mat-label>{{ roomUserNames }}</mat-label>
        </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="window-messages" id="scrollme">
        <div class="messages-top-buffer"></div>
        <ng-container *ngFor="let message of messageArray">
            <app-chat-window [isMe]="loginProfile?.id === message.room?.user?._id">
                <div username>
                    {{ message.room ? getUserName(message.room) : '' }}
                </div>
                <div timestamp>
                    {{ message.creationDate.toString() | commentTime }} ago
                </div>
                <div content>
                    {{ message.message }}
                </div>
            </app-chat-window>
            <!-- {{ message.message }} -->
        </ng-container>
    </mat-card-content>

    <form *ngIf="messageForm" [formGroup]="messageForm">
        <mat-card-actions class="window-action-container">
            <mat-form-field class="message-input">
                <!-- <input matInput placeholder="" formControlName="message"> -->
                <textarea rows="1" matInput formControlName="message"></textarea>
            </mat-form-field>

            <button mat-mini-fab class="message-send" (click)="sendMessage()">
                <mat-icon>send</mat-icon>
            </button>
        </mat-card-actions>
    </form>
</mat-card>